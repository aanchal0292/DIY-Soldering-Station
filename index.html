<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <link rel="stylesheet" href="stylesheets/mine.css">

    <title>DIY Soldering Station</title>

  </head>

  <body>

    <header>
      <div class="container">
        <h1>DIY Soldering Staion</h1>
        <h2>Project for PreFab Academy</h2>

        <section id="downloads">

        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <p>
          So, I made an entire soldering station myself! really?. No, I just made the controller, the iron has to be obtained separately. Though this controller is made to be used with Weller
          <!-- TODO: name of the pencil -->, the idea and the circuit can be used for any pencil with minor modification in the circuit and firmware, be it Weller, Hakko, Goot etc.
And most importantly, I was not alone, I had help from my friend and fellow trainee (at Pre Fab Academy), Yadu, he did most the micro-controller interfacing and coding, like LCD interfacing.
          <br>Okay now let's read about the development.
        </p>

        <h2>Motive</h2>

        <p>
          First of all thanks to whoever selected and sent the the equipments to the FabLab here. He/she was the reason for this project, why? In India we have 230v and almost all the equipments here works on 110v. Most of these machine (including a 2KW electric
          furnace) require a transformer to convert the 230v to 100v. Thogh the there is a 'big' label pasted on almost all equipments saying that it need 110v AC, some 'illiterate' 'idiot' will come and plug something to the 230v supply, and BOOOM, he
          just contributed something to this pile of crap.
          <!-- TODO: image of the fried items -->
        </p>
        <p>
          So one day in the Fab Academy we had to make the <a href="http://fab.cba.mit.edu/content/projects/fabisp/"> FabISP </a> and one of the two soldering station is not working. My friend Yadu told me that he saw someone plugging it into the 230v
          wall socket. So we were almost sure that it got fried, so me, Yadu and our trainer Mr Luciano tried opened the controller unit expecting a blown fuse. To our surprise this $100 equipment didn't have fuse inside. On inspecting further we found
          that the transformer primary winding of the transformer and the voltage regulator inside the circuit board is fried. The micro-controller was not getting any power even if we supply 24v to the board directly, using a lab power supply.
          <br>
          <!-- TODO: images of the damaged soldering station -->
          Now we are left with only one soldering station, I am not waiting for anyone and they are slow. So I decided to use the lab power supply to power the pencil directly, so that I can just finish soldering my circuit and I don't have to wait for anyone.
          That was the motivation, I immediately remembered Mr Luciano talking about the project we were supposed to do as a part of the academy. I just got mine.
        </p>

        <h2> Evolution</h2>

        <p>
          The pencil had 5 wires coming out of it, I knew that the pencil had a heating element, a temperature sensor and the pencil's rubber grip is grounded for ESD protection.
          <!-- TODO: the pictures of pencil connectors both male and female -->
          <!-- TODO: image of wires coming from the front panel -->
          I had to know which wire is which. Tried googling for some time, but I didn't find the answer I was looking for, seems that this model has many revisions. Now I need to find out what each of the wire is for. But I got some other information retarding
          the sensor used, very likely to be a K-type thermocouple.
        </p>
        <p>
          5 wires, so the guess would be, 2 for heater, 2 for sensor, and 1 for ESD(grounding). On inspecting the connections, I find that the green were is connected to the earth wire, so that wire clearly is the ESD. One down 5 more to go.
        </p>
        <p>
          Then I inspected the circuit board and followed the traces hoping identify the wires.
          <!-- TODO: image of the logic board -->
          See that big component with a heat sink? It's Fet or a power transistor (very likely a MOSFET) which controls the power flow to the heater. The control circuit/micrcontroller will be controlling this component via a PWM (Pulse Width Modulation) signals
          to the heater power. So?, follow the traces from this component, I see two thick traces from the FET, this wire must be going to the heater. Following the trace further, I found that one these traces goes to the transformer secondary and the
          other goes to one of the RED wires from the front-panel. So the other RED wire must be the going to the second wire of the transformer secondary, right? Yes it does and the circuit is complete. So the RED wires are going to the heater. The clues
          were, thick traces to carry high current (about 2A), direct connection to the 24v AC output of the transformer (no digital component/sensor will be powered by the unregulated AC supply).
          <br> Lets make sure once, the pencil is rated for 50W at 24v, means it draws about 2A at 24v. So the heating element must have a resistance lower than 12 ohms, lets see.
          <!-- TODO: resistance value of the heating element apply 10v and measure
            the current to calculate the resisteance-->
        </p>
        <p>
          With just two wires remaining it is obvious that these are going to be the sensor leads. Now what type of a sensor is this?
          <br> If the sensor is resistive (the resistance changes with temperature), PTC, NTC, PT100 etc it must have a high resistance, ranging from 50ohm
          <!-- TODO: for what  -->to 10s of Kohms
          <!-- TODO: for what? -->. And if the sensor is a thermocouple (produces a potential difference proportional to the temperature), it must have a very low resistance. When measured I found a very low resistance, almost short circuit so it must be a thermocouple and my
          'googling' also supports this guess.
        </p>
        <p>
          Lets check the thermocouple, the wikipedia and NTES
          <!-- TODO: NTES? and the links to NTES AND wikipedia-->data tells that about 4 mV potential difference can be expected across the terminals at about (100 + room temperaure) degree Celsius. (100 + room temperaure) because the thermocouple can only measure the temperature relatively. It is made of
          a junction between two metals and the potential drop produced by the junction depends on the temperature difference between the metals. In case of the soldering iron one of the metal is at the tip temperature and the other will be at room temperature.
          So the tip temperature is measured relative to the room temperature.
          <br> This tells us that even at the maximum temperature of the iron, the potential difference by the thermocouple will be under 20 mV.
        </p>

        <h3>Stage one: the makeshift soldering station</h3>

        <p>
          Okay, I don't have the time to make the control unit now, I need to make the FabISP.(don't runaway I'm going to make it, keep reading) So I set the power supply to a maximum of 24v and connected to the heating element (RED wires). The thermocouple is
          connected to the oscilloscope to monitor the 'temperature' (actually the potential differance). The DSO is set to read the average DC voltage across the thermocouple.
          <br>This one is a really expensive soldering station, but it will do for the day.
          <!-- TODO: the photo of the setup -->
        </p>
        <p>
          To make use of this setup we need to hold the pencil at a safe temperature and we don't know what value of the DSO reading corresponds to that temperature. The fix? I connected the pencil to the working controller and let it heat up to the set value,
          disconnect and immediately connect to the socket of our make-shift soldering station, whatever the DSO displays corresponds to the temperature we need the pencil to be at. Tweaking the current limit dial in the power supply, I found the current
          required to keep the pencil at this temperature, 0.9A to 1.0A.
          <!-- TODO: the image of this setup and me with the iron -->
          <br> The setup is working and I could solder my FabISP. I also used this setup to de-solder the board later, and use the components to make another board, <a href="http://fab.cba.mit.edu/content/projects/fabispkey/">FabISP Key</a>. But the signal
          is too weak compared to the noise. I have to amplify the signal.
        </p>

        <h3> Stage 2: Op-Amp</h3>

        <p>
          I will be making the controller using one of the atmega micro-controller available in the lab. Most likely a Atmega168p or Atmega328p. Its pretty obvious that we have to scale (amplify) the 1-20mv to 0-5v for measuring the thermocouple potential via the
          ADC. This process obviously requires an amplifier, so time to make one. But one problem, the components in the FabLab are only available SMT packages. So prototyping is going to be challenging.
        </p>
        <p>
          I made a simple non-inverting amplifier using the
          <!-- TODO: name of the op-amp -->, few filter capacitors and the potentiometer from the original Weller logic board. And this little creature was born.
          <!-- TODO: schematic -->
          <!-- TODO: pics of the op-amp -->
        </p>

        <h3>Stage 3: Op-Amp 'onboard' </h3>

        <p>
          Its time to take the project to the next level, time to make a proper PCB for the amplifier. I did a lot of research and came across an application note from Microchip. <!-- TODO: the link to the microchip app note -->
          The app-note describes a differential amplifier using two op-amps to amplify the signal from a thermocouple to 0-5 V range. So I used this design as a reference for my design.
          The board I designed has an amplifier setup described in the app-note, another NTC <!-- TODO: NTC? --> based temperature sensor for measuring the absolute room temperature and the MOSFET.
          (16A, 50V, 60W continues, logic level MOSFET). All five wires from the pencil goes to this board. The board has two outputs for the ADC, basically the absolute and tip temperatures. The board also requires two levels of voltage,
          24v, 2A supply for the heater and 5v for everything else. I also made a large copper pad which act as heat sink for the MOSFET. The design uses a double sided PCB and the bottom layer is used only as a ground plane.
          <!-- TODO: images of the board populated and unpopulated -->
          <!-- TODO: eagle files -->
          <!-- TODO: png files of the layers-->
          <!-- TODO: videos of the design phase -->
        </p>

<p>
  During this time my friend Yadu, was experimenting with interfacing the LCD to the FabDuino <!-- TODO: link --> he made (I too made a similar board, not fabduino, will talk about it later). He had some troubles prototyping the section; you can see the pictures in the next section and you will know what I'm talking about.
  The FabLab (or any lab for that matters) here needs some basic stuff in their inventory, most importantly jumper wires, a lot of them, and all types(M-M, M-F, F-F).
  <br>So it's time to merge our projects.
</p>

<h3>Stage 4: Putting the pieces together</h3>

<p>
  Lets give our project a display and a 'brain'. Yadu had the LCD interfaced with the FabDuino on a breadboard. We connected the amplifier section to the micr-controller and tried to
  read the temperature. We got the ADC values displaying, that was easier done than said. But converting the ADC values to the temperature was not easy.
  We had to calibrate, for that we needed some source of known temperature or a thermometer. We had none. So I came up with this crazy setup to get at-least one calibration point, the boiling point of water.
  <!-- TODO: pics of pencil in water -->
</p>






        <div class="row">
          <a href="#hide1" class="hide" id="hide1">
            <h2> a </h2>
          </a>
          <a href="#show1" class="show" id="show1">
            <h2> a </h2>
          </a>
          <div class="list">
            <ul>

            </ul>
          </div>
        </div>
        </lin>


        <!--
        <figure>
          <img src="images/vinyl/vn1.JPG" alt="Vinyl Cutter" onmouseover="this.width='1000'" onmouseout="this.width='110'">
          <figcaption style="display:inline; color:grey">The Vinyl Cutter we have, Roland CAMM-1 GX-24</figcaption>
        </figure>
-->

      </section>
    </div>


  </body>

</html>
